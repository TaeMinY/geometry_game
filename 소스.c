#include<stdio.h>
#include<conio.h>
#include<windows.h>
#include<stdlib.h>
#define MAPSIZEX 40
#define MAPSIZEY 20
#define BIGMAPSIZE 30
#define WALL 1
#define PLAYER 2
#define OUTWALL 3
#define END 4
#define UP 72
#define DOWN 80
#define RIGHT 77
#define LEFT 75



int playerscore = 100;
int fan = 1;
int x, y;//player pos
int map[MAPSIZEY][MAPSIZEX] = {


   { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 2, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},

};

int map2[MAPSIZEY][MAPSIZEX] = {


   { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 2, 0, 0, 0, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 1 },
   { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},

};
int map3[MAPSIZEY][MAPSIZEX] = {


   { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1 },
   { 1, 0, 2, 0, 0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 1 },
   { 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1},

};

// 화면에서 커서 숨기는 함수
void removecursor(void)
{
	CONSOLE_CURSOR_INFO cursorInfo = { 0, };
	cursorInfo.dwSize = 1;
	cursorInfo.bVisible = FALSE;
	SetConsoleCursorInfo(GetStdHandle(STD_OUTPUT_HANDLE), &cursorInfo);
}

void gotoxy(int x, int y) {
	COORD P;
	P.X = x;
	P.Y = y;
	SetConsoleCursorPosition(GetStdHandle(STD_OUTPUT_HANDLE), P);
}
int m = 0;

int startscreen(void) {
	while (1) {
		for (int i = 7; i < 53; i++) {
			gotoxy(i, 0);
			printf("-");
		}
		for (int i = 1; i < 13; i++) {
			gotoxy(6, i);
			printf("|");
		}
		for (int i = 1; i < 13; i++) {
			gotoxy(53, i);
			printf("|");
		}
		gotoxy(10, 2);
		printf("지오메트리 version TM");
		gotoxy(25, 4);
		printf("키");
		gotoxy(25, 5);
		printf("q : 1스테이지");
		gotoxy(25, 6);
		printf("w : 2스테이지");
		gotoxy(25, 7);
		printf("e : 3스테이지");
		gotoxy(25, 8);
		printf("ENTER를 눌러 실행해주세요");

		gotoxy(25, 9);
		printf("ESC : 종료");
		gotoxy(25, 10);
		printf("점수 : %d", playerscore);
		gotoxy(11, 9);
		printf("1스테이지");
		gotoxy(11, 10);
		printf("2스테이지");
		gotoxy(11, 11);
		printf("3스테이지");

		for (int i = 7; i < 53; i++) {
			gotoxy(i, 13);
			printf("-");
		}

		if (_kbhit() != 0) {
			int key;
			key = _getch();
			if (key == 'q' || key == 'Q') {
				gotoxy(9, 11);
				printf("  ");
				gotoxy(9, 10);
				printf("  ");
				gotoxy(9, 9);
				printf("▶");
				//int key = 0;
				m = 1;
				fan = 1;
			}
			else if (key == 'w' || key == 'W') {
				gotoxy(9, 9);
				printf("  ");
				gotoxy(9, 10);
				printf("▶");
				gotoxy(9, 11);
				printf("  ");
				//int key = 0;
				m = 1;
				fan = 2;
			}
			else if (key == 'e' || key == 'E') {
				gotoxy(9, 9);
				printf("  ");
				gotoxy(9, 10);
				printf("  ");
				gotoxy(9, 11);
				printf("▶");
				//int key = 0;
				m = 1;
				fan = 3;
			}
			else if (key == 27) {
				system("cls");
				printf("게임을 종료하셨습니다");
				gotoxy(25, 0);
				exit(1);
			}
			else if (key == 13)
			{
				if (m == 1) {
					return 1;
				}

			}
		}

	}

}

void showSmallMap() {
	for (int i = 0; i < MAPSIZEY; i++) {
		if (fan == 1) {
			for (int j = 0; j < MAPSIZEX; j++) {
				if (map[i][j] == PLAYER) {
					x = j;
					y = i;
					break;
				}
			}
		}
		else if (fan == 2) {
			for (int j = 0; j < MAPSIZEX; j++) {
				if (map2[i][j] == PLAYER) {
					x = j;
					y = i;
					break;
				}
			}
		}
		else if (fan == 3) {
			for (int j = 0; j < MAPSIZEX; j++) {
				if (map3[i][j] == PLAYER) {
					x = j;
					y = i;
					break;
				}
			}
		}
	}
	for (int i = 0; i < MAPSIZEY; i++)
	{

		if (fan == 1) {
			for (int j = 0; j < MAPSIZEX; j++)
			{
				gotoxy(j * 2, i);
				if (map[i][j] == WALL)
					printf("■");
				else if (map[i][j] == PLAYER)
				{
					printf("★");
				}
				else if (map[i][j] == END)
				{
					printf("♠");
				}
				else
					printf("  ");
			}
		}
		else if (fan == 2) {
			for (int j = 0; j < MAPSIZEX; j++)
			{
				gotoxy(j * 2, i);
				if (map2[i][j] == WALL)
					printf("■");
				else if (map2[i][j] == PLAYER)
				{
					printf("★");
				}
				else if (map2[i][j] == END)
				{
					printf("♠");
				}
				else
					printf("  ");
			}
		}
		if (fan == 3) {
			for (int j = 0; j < MAPSIZEX; j++)
			{
				gotoxy(j * 2, i);
				if (map3[i][j] == WALL)
					printf("■");
				else if (map3[i][j] == PLAYER)
				{
					printf("★");
				}
				else if (map3[i][j] == END)
				{
					printf("♠");
				}
				else
					printf("  ");
			}
		}




	}

	gotoxy(90, 6);
	printf("스페이드를 찾아라!");
	gotoxy(90, 7);
	printf("점프를 통해 스페이드를");
	gotoxy(90, 8);
	printf("찾으면 점수를 %d점 얻습니다", fan * 30);
	gotoxy(90, 9);
	printf("스페이스 : 점프");
	printf("아래 : ↓");
	gotoxy(90, 11);
	printf("메인으로 : esc");
	gotoxy(90, 12);
	printf("현재 점수 : %d", playerscore);


	return;

}
double timer;
double timer2;
double timer3;
int GetKey(void)
{

	if (fan == 1) {
		int key;
		timer += 0.1;
		if (map[y][x + 1] != WALL)//오른쪽 move
		{
			map[y][x] = 0;
			if (map[y][x + 1] == END)
			{
				playerscore = 30 + playerscore;
				map[18][2] = 2;
				return 1;
			}
			map[y][x + 1] = 2;
			x += 1;
		}

		if (_kbhit())
		{
			key = _getch();

			if (key == 32 && map[y - 1][x] != 1)//jump
			{
				if (map[y - 2][x] == 1)
				{
					map[y][x] = 0;
					y -= 1;
					map[y][x] = 2;
					timer = 0.0f;
				}
				else if (map[y - 3][x] == 1)
				{
					map[y][x] = 0;
					y -= 2;
					map[y][x] = 2;
					timer = 0.0f;
				}
				else
				{
					map[y][x] = 0;
					map[y - 3][x] = 2;
					y -= 3;
					timer = 0.0f;
				}

			}
			
			if (key == 27) {
				for (int i = 0; i < MAPSIZEY; i++) {
					for (int j = 0; j < MAPSIZEX; j++) {
						if (map[i][j] == PLAYER) {
							map[i][j] = 0;
							break;
						}
					}
				}
				map[18][2] = PLAYER;
				return 1;
			}
		}
		if (timer == 0.2)
		{
			if (map[y + 1][x] != 1)
			{
				map[y][x] = 0;
				if (map[y + 1][x] == END)
				{
					playerscore = 30 + playerscore;
					map[18][2] = 2;
					return 1;
				}
				map[y + 1][x] = 2;
				y += 1;
				timer = 0.0f;
			}
			else
			{
				timer = 0.0f;
			}
		}
		return 0;
	}
	else if (fan == 2) {
		int key;
		timer2 += 0.1;
		if (_kbhit())
		{
			key = _getch();

			if (key == 32 && map2[y - 1][x] != 1)//jump
			{
				if (map2[y - 2][x] == 1)
				{
					map2[y][x] = 0;
					y -= 1;
					map2[y][x] = 2;
					timer2 = 0.0f;
				}
				else if (map2[y - 3][x] == 1)
				{
					map2[y][x] = 0;
					y -= 2;
					map2[y][x] = 2;
					timer2 = 0.0f;
				}
				else
				{
					map2[y][x] = 0;
					map2[y - 3][x] = 2;
					y -= 3;
					timer2 = 0.0f;
				}

			}
			if (key == 27) {
				for (int i = 0; i < MAPSIZEY; i++) {
					for (int j = 0; j < MAPSIZEX; j++) {
						if (map2[i][j] == PLAYER) {
							map2[i][j] = 0;
							break;
						}
					}
				}
				map2[18][2] = PLAYER;
				return 1;
			}
			if (key == 77 && x < 38 && map2[y][x + 1] != WALL)//오른쪽 방향키
			{
				map2[y][x] = 0;
				if (map2[y][x + 1] == END)
				{
					playerscore = 60 + playerscore;
					map2[18][2] = 2;
					return 1;
				}
				map2[y][x + 1] = 2;
				x += 1;
			}

			if (key == 75 && x > 1 && map2[y][x - 1] != WALL)//왼쪽 방향키
			{
				map2[y][x] = 0;
				if (map2[y][x - 1] == END)
				{
					playerscore = 60 + playerscore;
					map2[18][2] = 2;
					return 1;
				}
				map2[y][x - 1] = 2;
				x -= 1;
			}
		}
		if (timer2 == 0.5)
		{
			if (map2[y + 1][x] != 1)
			{
				map2[y][x] = 0;
				if (map2[y + 1][x] == END)
				{
					playerscore = 60 + playerscore;
					map2[18][2] = 2;
					return 1;
				}
				map2[y + 1][x] = 2;
				y += 1;
				timer2 = 0.0f;
			}
			else
			{
				timer2 = 0.0f;
			}
		}
		return 0;
	}
	if (fan == 3) {
		int key;
		timer3 += 0.1;
		if (_kbhit())
		{
			key = _getch();

			if (key == 32 && map3[y - 1][x] != 1)//jump
			{
				if (map3[y - 2][x] == 1)
				{
					map3[y][x] = 0;
					y -= 1;
					map3[y][x] = 2;
					timer3 = 0.0f;
				}
				else if (map3[y - 3][x] == 1)
				{
					map3[y][x] = 0;
					y -= 2;
					map3[y][x] = 2;
					timer3 = 0.0f;
				}
				else
				{
					map3[y][x] = 0;
					map3[y - 3][x] = 2;
					y -= 3;
					timer3 = 0.0f;
				}

			}
			if (key == 27) {
				for (int i = 0; i < MAPSIZEY; i++) {
					for (int j = 0; j < MAPSIZEX; j++) {
						if (map3[i][j] == PLAYER) {
							map3[i][j] = 0;
							break;
						}
					}
				}
				map3[18][2] = PLAYER;
				return 1;
			}
			if (key == 77 && x < 38 && map3[y][x + 1] != WALL)//오른쪽 방향키
			{
				map3[y][x] = 0;
				if (map3[y][x + 1] == END)
				{
					playerscore = 90 + playerscore;
					map3[18][2] = 2;
					return 1;
				}
				map3[y][x + 1] = 2;
				x += 1;
			}

			if (key == 75 && x > 1 && map3[y][x - 1] != WALL)//왼쪽 방향키
			{
				map3[y][x] = 0;
				if (map3[y][x - 1] == END)
				{
					playerscore = 90 + playerscore;
					map3[18][2] = 2;
					return 1;
				}
				map3[y][x - 1] = 2;
				x -= 1;
			}

		}
		if (timer3 == 0.5)
		{
			if (map3[y + 1][x] != 1)
			{
				map3[y][x] = 0;
				if (map3[y + 1][x] == END)
				{
					playerscore = 90 + playerscore;
					map3[18][2] = 2;
					return 1;
				}
				map3[y + 1][x] = 2;
				y += 1;
				timer3 = 0.0f;
			}
			else
			{
				timer3 = 0.0f;
			}
		}
		return 0;
	}
}

int main() {
	removecursor();
	int rt;
reset:
	rt = startscreen();  //return 값
	while (1) {
		if (rt == 1) {
			showSmallMap();
			if (GetKey())
			{
				system("cls");
				goto reset;
			}
		}
	}
	return 0;
}
